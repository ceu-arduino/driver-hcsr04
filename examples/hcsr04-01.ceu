#include <wclock.ceu>

#define HCSR04_PIN_TRIGGER 07
#ifdef ARDUINO_BOARD_MEGA
#include "pin-10.ceu"
#define HCSR04_PIN_ECHO 10
#else
#include "pin-02.ceu"
#define HCSR04_PIN_ECHO 02
#endif

#include "hcsr04.ceu"

output on/off PIN_13;

{
    //S.begin(9600);
    //S.println("Ceu - HC-SR04 - 01");
    //_DELAY(20);
}

loop do
    //{S.println(">>>"); _DELAY(5);}
    var int d = await Hcsr04();
    //{S.println(@d); _DELAY(10);}
    emit PIN_13((d <= 30) as on/off);
    await 60ms;
end
